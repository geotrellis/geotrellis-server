wms {
    service-metadata {
        name = "WMS"
        title = "GeoTrellis Service"
        online-resource {}
        keyword-list = {
            keyword = ["geotrellis", "catalog"]
        }
        contact-information = {
            contact-person-primary = {
                contact-person = "Eugene Cheipesh"
                contact-organization = "Azavea"
            }
            contact-position = "Developer"
            contact-address = {
                address-type = "Office"
                address = "990 Spring Garden St."
                city = "Philadelphia"
                state-or-province = "PA",
                post-code = "19087",
                country = "USA")
            }
        }
    }
    layer-definitions = [
      ${layers.us-ned},
      ${layers.us-ned-slope},
      ${layers.us-census-median-household-income}
    ]
}

wcs {
    service-metadata = {
        identification = {
            title = "WCS"
            description = "Geotrellis WCS Service"
            keywords = []
            profile = ["http://azavea.com/wcs-profile"]
            fees = []
            access-constraints = []
        }
        provider = {
            name = "Azavea"
            site = "https://www.azavea.com"
        }
    }
    layer-definitions = [
      ${layers.us-ned},
      ${layers.us-ned-slope},
      ${layers.us-census-median-household-income}
    ]
}

wmts {
    service-metadata = {
        identification = {
            title = "WMTS"
            description = "Geotrellis WMTS Service"
            keywords = []
            profile = ["http://azavea.com/wmts-profile"]
            fees = []
            access-constraints = []
        }
        provider = {
            name = "Azavea"
            site = "https://www.azavea.com"
        }
    }
    layer-definitions = [
      ${layers.us-ned},
      ${layers.us-ned-slope},
      ${layers.us-census-median-household-income}
    ]
}

layers = {
    "nlcd-2011": {
        type = "simplesourceconf"
        name = "NLCD 2011",
        title = "National Land Cover Dataset 2011"

        source = {
            type = "geotrellis"
            catalog-uri = "s3://azavea-datahub/catalog"
            layer = "nlcd-2011-epsg3857"
            zoom = 13
            band-count = 1
        }

        defaultStyle = "official"
        styles = [
            {
                name = "official"
                title = "NLCD Official Color Classes"
                type = "colormapconf"
                classes = ${color-maps.nlcd}
            },
            {
                name = "red-to-blue"
                title = "Red To Blue"
                type = "colorrampconf"
                colors = ${color-ramps.red-to-blue}
                stops = 64
            }
        ]
    }
    "us-census-median-household-income": {
        type = "simplesourceconf"
        name = "us-census-median-household-income"
        title = "US Sensus Median Household Income 20??"
        source = {
            type = "geotrellis"
            catalog-uri = "s3://azavea-datahub/catalog"
            layer = "us-census-median-household-income-30m-epsg3857"
            zoom = 12
            band-count = 1
        }

        styles = []
    }
    "us-ned": {
        type = "simplesourceconf"
        name = "us-ned"
        title = "US NED"
        source = {
            type = "geotrellis"
            catalog-uri = "s3://azavea-datahub/catalog"
            layer = "us-ned-tms-epsg3857"
            zoom = 14
            band-count = 1
        }
        styles = []
    }
    "addition-house-income": {
        type = "mapalgebrasourceconf"
        name = "addition-house-income"
        title = "test addition"
        algebra = {
          "args" : [
            {
              "name" : "us-census-median-household-income",
              "symbol" : "rasterV"
            },
            {
              "name" : "us-census-median-household-income",
              "symbol" : "rasterV"
            }
          ],
          "symbol" : "+"
        }
        styles = [
            {
                type = "colorrampconf"
                name = "red-to-blue"
                title = "Red To Blue"
                colors = ${color-ramps.red-to-blue}
                stops = 64
            }
        ]
    }
    "us-ned-slope": {
        type = "mapalgebrasourceconf"
        name = "us-ned-slope"
        title = "ned slope"
        algebra = {
          "args" : [
            {
              "name" : "us-ned",
              "symbol" : "rasterV"
            }
          ],
          "symbol" : "fslope"
        }
        styles = [
            {
                type = "colorrampconf"
                name = "red-to-blue"
                title = "Red To Blue"
                colors = ${color-ramps.red-to-blue}
                stops = 64
            }
        ]
    }
}

color-ramps = {
    "red-to-blue": [
        0x2A2E7FFF, 0x3D5AA9FF, 0x4698D3FF, 0x39C6F0FF,
        0x76C9B3FF, 0xA8D050FF, 0xF6EB14FF, 0xFCB017FF,
        0xF16022FF, 0xEE2C24FF, 0x7D1416FF
    ]
}

color-maps = {
    "nlcd":  [
        { value: 11 , color:  0x526095FF}
        { value: 12 , color:  0xFFFFFFFF}
        { value: 21 , color:  0xD28170FF}
        { value: 22 , color:  0xEE0006FF}
        { value: 23 , color:  0x990009FF}
        { value: 31 , color:  0xBFB8B1FF}
        { value: 32 , color:  0x969798FF}
        { value: 33 , color:  0x382959FF}
        { value: 41 , color:  0x579D57FF}
        { value: 42 , color:  0x2A6B3DFF}
        { value: 43 , color:  0xA6BF7BFF}
        { value: 51 , color:  0xBAA65CFF}
        { value: 61 , color:  0x45511FFF}
        { value: 71 , color:  0xD0CFAAFF}
        { value: 81 , color:  0xCCC82FFF}
        { value: 82 , color:  0x9D5D1DFF}
        { value: 83 , color:  0xCD9747FF}
        { value: 84 , color:  0xA7AB9FFF}
        { value: 85 , color:  0xE68A2AFF}
        { value: 91 , color:  0xB6D8F5FF}
        { value: 92 , color:  0xB6D8F5FF}
    ]

}
